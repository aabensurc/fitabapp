<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#2196F3">
  <meta name="description" content="FITABAPP">
  <link rel="icon" type="image/jpg" href="img/favicon.ico"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="css/styles.css">
      <!-- Swiper CSS -->
      <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
  <link rel="manifest" href="manifest.json">

  <style>
        .routine-img {
      width: 100%;
      max-height: 250px;
    }
    .exercise-img {
      width: 60px;
      height: 60px;
      object-fit: cover;
      border-radius: 10px;
    }
    #routineName{
      font-size: 1.4em;
    }
    #routineType{
      font-size: .7em;
      background-color: #2196F3;
      border-radius: 5px;

      text-decoration: none;

      color: #ffffff;
      padding: 5px;

    }
    .mt-1{
      font-size: .85em;
    }
  </style>
  <title>FITABAPP</title>

  <!-- Incluir el archivo auth.js -->
  <script src="js/auth.js"></script>
  <script>
      // Llamar a la función para verificar si el usuario está logueado
      window.addEventListener('load', checkLogin);
  </script>

<script>
    // Función para mostrar el mensaje de bienvenida
    function showWelcomeMessage() {
      const nombre = localStorage.getItem('nombre');
      const sexo = localStorage.getItem('sexo');
  
      if (nombre && sexo) {
        const saludo = (sexo === 'M') ? 'Bienvenido' : 'Bienvenida';
        document.getElementById('welcome-message').innerText = `${saludo} ${nombre}`;
      } else {
        document.getElementById('welcome-message').innerText = 'Bienvenido a FITABAPP';
      }
    }
  
    // Llamar a la función para mostrar el mensaje al cargar la página
    window.addEventListener('load', showWelcomeMessage);
</script>

  
</head>
<body>
<!-- App Bar -->
<div class="app-bar">
  
  <h1>ABFITAPP</h1> <!-- Título dinámico -->
  <div class="nav-icons" id="icon_three_dots">
    <i class="bi bi-three-dots-vertical" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false"></i>
    <!-- Menú desplegable -->
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton">
      <li class="d-flex align-items-center">
        <i class="bi bi-telephone-fill ms-3" style="font-size: 14px;"></i>
        <a class="dropdown-item" href="contacto.html" id="contacto">Contacto</a>
      </li>
      <li><hr class="dropdown-divider"></li>
      <li class="d-flex align-items-center">
        <i class="bi bi-power ms-3" style="font-size: 14px;"></i>
        <a class="dropdown-item" href="#" id="logout-option">Cerrar sesión</a>
      </li>
      </ul>
</div>
</div>
<div class="container-fluid container_home">
  <p class="text-muted" id="welcome-message"></p> <!-- Agregar un elemento para el mensaje de bienvenida -->
  <h2>Ponte en forma!</h2>
  <div class="swiper-container my-4">
    <div class="swiper-wrapper">
        <!-- Primera tarjeta -->
        <div class="swiper-slide">
            <div class="card" id="card-intro" style="background-color: #2196F3; color: white; border-radius: 15px; background-image: url('img/imagen_vector_intro.png'); background-size: cover; background-repeat: no-repeat; background-position: center;">
                <div class="card-body d-flex justify-content-between align-items-center" style="height: 100%;">
                    <div style="width: 64%;">
                        <h5 class="card-title">Sigue tus rutinas diarias y alcanza tus metas</h5>
                        <button id="btn_rutina_pers" class="btn btn-light mt-3" style="border-radius: 14px; color: #2196F3;">Ver rutinas</button>
                    </div>
                    <div style="width: 36%;"></div>
                </div>
            </div>
        </div>

        <!-- Segunda tarjeta -->
        <div class="swiper-slide">
            <div class="card" id="card-intro" style="background-color: #4CAF50; color: white; border-radius: 15px; background-image: url('img/imagen_vector_intro2.png'); background-size: cover; background-repeat: no-repeat; background-position: center;">
                <div class="card-body d-flex justify-content-between align-items-center" style="height: 100%;">
                    <div style="width: 64%;">
                        <h5 class="card-title">Empieza tu vida fitness y prepárate para este verano</h5>
                        <button id="btn_rutinas" class="btn btn-light mt-3" style="border-radius: 14px; color: #4CAF50;">Empieza ya</button>
                    </div>
                    <div style="width: 36%;"></div>
                </div>
            </div>
        </div>

        <!-- Tercera tarjeta -->
        <div class="swiper-slide">
            <div class="card" id="card-intro" style=" background-color: #FF5722; color: white; border-radius: 15px; background-image: url('img/imagen_vector_intro3.png'); background-size: cover; background-repeat: no-repeat; background-position: center;">
                <div class="card-body d-flex justify-content-between align-items-center" style="height: 100%;">
                    <div style="width: 64%;">
                        <h5 class="card-title">Monitorea tu progreso y registra tus series</h5>
                        <button id="btn_reg" class="btn btn-light mt-3" style="border-radius: 14px; color: #FF5722;">Ver más</button>
                    </div>
                    <div style="width: 36%;"></div>
                </div>
            </div>
        </div>
    </div>
    <!-- Eliminar los botones de navegación -->
</div>




<div class="row align-items-center my-4 mt-5">
    <div class="col-8">
      <h3 class="mb-0" style="text-align: left;">Ejercicios</h3>
    </div>
    <div class="col-4 text-end">
      <a href="ejercicios.html" style="color: #2196F3; font-weight: 600; text-decoration: none;">Ver más</a>
    </div>
  </div>
  
  
<!-- Nueva fila con iconos circulares y texto debajo -->
<div class="icon-container-home d-flex justify-content-between text-center my-4 w-100">
    <div id="item_brazos">
      <div class="circle-icon" style="width: 60px; height: 60px; background-color: #2196F3; border-radius: 50%; display: flex; justify-content: center; align-items: center; margin: 0 auto;">
        <img src="img/iconos_musc/icono_brazo.png" style="color: white; width: 30px; height: 30px;"></img> <!-- Icono para Brazos -->
      </div>
      <p class="mt-1" style="font-weight: 500;">Brazos</p>
    </div>
    <div id="item_piernas">
      <div class="circle-icon" style="width: 60px; height: 60px; background-color: #2196F3; border-radius: 50%; display: flex; justify-content: center; align-items: center; margin: 0 auto;">
        <img src="img/iconos_musc/icono_pierna.png" style="color: white; width: 30px; height: 30px;"></img> <!-- Icono para Piernas -->
      </div>
      <p class="mt-1" style="font-weight: 500;">Piernas</p>
    </div>
    <div id="item_abdomen">
      <div class="circle-icon" style="width: 60px; height: 60px; background-color: #2196F3; border-radius: 50%; display: flex; justify-content: center; align-items: center; margin: 0 auto;">
        <img src="img/iconos_musc/icono_abdomen.png" style="color: white; width: 30px; height: 30px;"></img> <!-- Icono para Abdomen -->
      </div>
      <p class="mt-1" style="font-weight: 500;">Abdomen</p>
    </div>
    <div id="item_gluteos">
      <div class="circle-icon" style="width: 60px; height: 60px; background-color: #2196F3; border-radius: 50%; display: flex; justify-content: center; align-items: center; margin: 0 auto;">
        <img src="img/iconos_musc/icono_gluteos.png" style="color: white; width: 30px; height: 30px;"></img> <!-- Icono para Glúteos -->
      </div>
      <p class="mt-1" style="font-weight: 500;">Glúteos</p>
    </div>
    <div id="item_cardio">
      <div class="circle-icon" style="width: 60px; height: 60px; background-color: #2196F3; border-radius: 50%; display: flex; justify-content: center; align-items: center; margin: 0 auto;">
        <img src="img/iconos_musc/icono_cardio.png" style="color: white; width: 30px; height: 30px;"></img> <!-- Icono para Glúteos -->
      </div>
      <p class="mt-1" style="font-weight: 500;">Cardio</p>
    </div>
  </div>


  <div class="row align-items-center my-2 mt-5" style="display: none;" id="label_rutina_hoy">
    <div class="col-8">
      <h3 class="mb-0" style="text-align: left;">Rutina de hoy</h3>
    </div>
    <div class="col-4 text-end">
      <a href="rutina_personalizada.html" style="color: #2196F3; font-weight: 600; text-decoration: none;">Ir</a>
    </div>
  </div>
  <div class="rutina-hoy" id="contendorRutinaHoy" style="display: none;">

  </div>


  <div class="row align-items-center my-4 mt-5">
    <div class="col-8">
      <h3 class="mb-0" style="text-align: left;">Rutinas populares</h3>
    </div>
    <div class="col-4 text-end">
      <a href="rutinas.html" style="color: #2196F3; font-weight: 600; text-decoration: none;">Ver más</a>
    </div>
  </div>


  

</div>

<!-- Bottom Navigation -->
<nav class="navbar navbar-expand fixed-bottom navbar-light p-0" style="background-color: #2196F3;">
  <div class="container-fluid p-0 m-0">
      <ul class="navbar-nav w-100 d-flex justify-content-between">
          <li class="nav-item text-center">
              <a class="nav-link text-white active" href="index.html">
                  <i class="bi bi-house-fill"></i><br>
                  Inicio
              </a>
          </li>
          <li class="nav-item text-center">
            <a class="nav-link text-white" href="rutinas.html">
                <i class="bi bi-clipboard2-minus-fill"></i><br>
                Rutinas
            </a>
        </li>
          <li class="nav-item text-center">
              <a class="nav-link text-white" href="ejercicios.html">
                  <i class="bi bi-lightning-fill"></i><br>
                  Ejercicios
              </a>
          </li>
          <li class="nav-item text-center">
              <a class="nav-link text-white" href="nutricion.html">
                  <i class="bi bi-apple"></i><br>
                  Nutrición
              </a>
          </li>

      </ul>
  </div>
</nav>







<script>
  // Al cargar el documento
document.addEventListener('DOMContentLoaded', function() {

  cargarRut();  // Llama a cargarRut después de que el DOM esté listo
});
</script>


<script>
  // Variable global para contar los ejercicios completados

async function cargarRut() {

  document.getElementById('label_rutina_hoy').style.display = 'flex';
  document.getElementById('contendorRutinaHoy').style.display = 'block';
  const nomUsuario = localStorage.getItem('username'); // Obtener el ID del usuario
    // Establecer la fecha actual en formato YYYY-MM-DD
    const fechaActual = new Date();
  const offset = fechaActual.getTimezoneOffset(); // Obtener la diferencia en minutos
  fechaActual.setMinutes(fechaActual.getMinutes() - offset); // Ajustar la fecha

  const fechaFormateada = fechaActual.toISOString().split('T')[0]; // Obtener solo la parte de la fecha

  // Cargar rutinas y ejercicios desde sus archivos JSON
  Promise.all([
    fetch('json/rutinas_custom.json').then(response => response.json()),
    fetch('json/ejercicios.json').then(response => response.json())
  ])
  .then(([rutinasData, ejerciciosData]) => {
    const rutina = rutinasData.rutinas.find(r => r.username == nomUsuario && r.fecha == fechaFormateada);
    const contenedorRutinaHoy = document.getElementById('contendorRutinaHoy');
    
    // Limpiar el contenido anterior
    contenedorRutinaHoy.innerHTML = '';

    if (rutina) {
      // Crear la estructura de la rutina
      const img = document.createElement('img');
      img.id = 'routineImage';
      img.className = 'routine-img mb-2';
      img.src = rutina.url_imagen;
      img.alt = 'Imagen de la rutina';
      
      const detalleContainer = document.createElement('div');
      detalleContainer.className = 'container-fluid p-0 container-detalle_rutina';

      const typeElement = document.createElement('a');
      typeElement.id = 'routineType';
      typeElement.className = '';
      typeElement.textContent = rutina.tipo.toUpperCase();

      const nameElement = document.createElement('h2');
      nameElement.id = 'routineName';
      nameElement.className = 'mb-0 mt-1';
      nameElement.textContent = rutina.nombre;



      const numEjercicios = rutina.ejercicios.length; // Contar los ejercicios
      const exercisesCount = document.createElement('p');
      exercisesCount.textContent = `${numEjercicios} ejercicios`;



      // Agregar todos los elementos al contenedor
      
      detalleContainer.appendChild(typeElement);
      detalleContainer.appendChild(nameElement);


      contenedorRutinaHoy.appendChild(img);
      contenedorRutinaHoy.appendChild(detalleContainer);
      contenedorRutinaHoy.appendChild(exercisesCount);

      contenedorRutinaHoy.addEventListener('click', () => {
      window.location.href = `rutina_hoy.html`;
    });
    } else {
      // Si no hay rutina, puedes mostrar un mensaje o hacer otra acción
      contenedorRutinaHoy.innerHTML = `<p>No se encontraron rutinas para esta fecha.</p>`;
    }
  })
  .catch(error => console.error('Error al cargar los JSON:', error));
}


  </script>

<!-- Bootstrap JS and dependencies -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<script src="js/app.js"></script>

<script>
  // Llamar a la función de logout cuando el usuario haga clic en "Cerrar sesión"
  document.getElementById('logout-option').addEventListener('click', logout);
</script>

<script>
    document.getElementById('item_brazos').addEventListener('click', function() {
      window.location.href = `ejerciciosxmusculo.html?musculo=B%C3%ADceps`;
  });

  document.getElementById('item_piernas').addEventListener('click', function() {
      window.location.href = `ejerciciosxmusculo.html?musculo=Cuádriceps`;
  });

  document.getElementById('item_abdomen').addEventListener('click', function() {
      window.location.href = `ejerciciosxmusculo.html?musculo=Abdomen`;
  });

  document.getElementById('item_gluteos').addEventListener('click', function() {
      window.location.href = `ejerciciosxmusculo.html?musculo=Glúteos`;
  });

  document.getElementById('item_cardio').addEventListener('click', function() {
      window.location.href = `ejerciciosxmusculo.html?musculo=Cardio`;
  });





  document.getElementById('btn_reg').addEventListener('click', function() {
      window.location.href = `registro_entrenamientos.html`;
  });

  document.getElementById('btn_rutina_pers').addEventListener('click', function() {
      window.location.href = `rutinas.html`;
  });

  document.getElementById('btn_rutinas').addEventListener('click', function() {
      window.location.href = `rutinas.html`;
  });

</script>

<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script>
  const swiper = new Swiper('.swiper-container', {
      slidesPerView: 1, // Mostrar un slide a la vez
      spaceBetween: 20, // Espacio entre los slides
      pagination: false, // Eliminar la paginación
      centeredSlides: true, // Centra el slide activo
      grabCursor: true, // Cambia el cursor al arrastrar
      effect: 'slide', // Efecto de transición
      scrollbar: false, // Eliminar el scrollbar
  });
</script>


</body>
</html>
